.TH anyfs-tools 8 "20 Nov 2006" "Version 0.84.9"
.SH "НАЗВАНИЕ"
anyfs-tools \- unix-way набор инструментов для восстановления и конвертирования\
 файловых систем.
.SH "СИНТАКСИС"
.nf
.BI "build_it [\-qvVn] " "directory inode_table"

.BI "anysurrect [\-b " blocksize "] [\-i " input_inode_table "]"
.BI "	[\-p " path_prefix "] [\-u " file_umask "] [\-U " dir_umask "] [\-fqvV] "
.BI "	[\-g " plug-ins "] [\-e] [\-t" " list_of_types" "] [\-l] " "device inode_table"

.BI "reblock [\-nqvV] " "inode_table device blocksize"

.BI "build_e2fs [ \-c|\-l " filename " ] [\-b " blocksize "]"
.BI "	[\-f " fragment-size "] [\-g " blocks-per-group "]"
.BI "	[\-i " bytes-per-inode "] [\-j] [\-J " journal-options "]"
.BI "	[\-N " number-of-inodes "] [-n] [\-m " reserved-blocks-percentage "]"
.BI "	[\-o " creator-os "] [\-O " feature "[,...]] [\-q]"
.BI "	[\-r " fs-revision-level "] [\-R " raid-options "] [\-v] [\-F]"
.BI "	[\-L " volume-label "] [\-M " last-mounted-directory "] [\-S]"
.BI "	[\-T " filesystem-type "] [\-V] " "inode_table device " [ blocks-count ]

.BI "build_xfs [\-b " subopt=value " ] [\-d " subopt [ =value "]]"
.BI "   [\-i " subopt=value "] [\-l " subopt [ =value "]] [\-f]"
.BI "   [\-n " subopt [ =value "]] [\-q] [\-r " subopt [ =value "]]"
.BI "   [\-s " subopt [ =value "]] [\-N] [\-L " label "] " "inode_table devicename "

.BI "anyconvertfs [\-\-tmpdir " directory "] [\-\-" blocksize "] [\-f] [\-\-dry]"
.BI "   [\-\-inodetable " inodetable "] [\-\-color|\-\-no\-color] [\-\-label" " label" "] "
.BI "   [--dontstop] [--pause " seconds "] [--use-anyfs|--use-anyfuse] [\-\-] " 
.IB "    device " "[" source_fs "]" " destination_fs"
.fi

.BI "anyfuse " "<inode_table> <device> <mount_point> <FUSE OPTIONS>"

.RB "mount -t " any " -o
.BI inodetable= file.it "[," other_mount_options ] " device dir"

.SH "ОПИСАНИЕ"

.B anyfs-tools
предоставляет unix-way набор инструментов для восстановления и конвертирования \
файловых систем.

.B build_it 
считывает из директории рекурсивно информацию обо всех \
инф.узлах файловой системы используя драйвер (для чтения) ОС 
.B Linux
и сохраняет её в виде внешней таблицы инф.узлов.

.B anysurrect 
ищет на устройстве файлы исходя из известной структуры \
различных типов файлов. Информация о найденных файлах также сохраняется \
в виде внешней таблицы инф.узлов.

.B reblock 
изменяет размер блока файловой системы.
.B reblock
используя информацию из таблицы инф.узлов изменяет положения \
отдельных фрагментов файлов так, чтобы они были выровнены по границам \
блоков нового размера.

.B build_e2fs
исходя из информации предоставляемой внешней таблицей инф.узлов \
строит на устройстве файловую систему 
.BR ext2fs .

.B build_xfs
исходя из информации предоставляемой внешней таблицей инф.узлов \
строит на устройстве файловую систему 
.BR xfs .

.B anyconvertfs
конвертирует файловую систему устройства с применением других утилит \
из
.BR anyfs-tools .

драйвер файловой системы 
.B anyfs 
для 
.B Linux
позволяет смонтировать \
устройство используя информацию из внешней таблицы инф.узлов. \
При этом на смонтированной файловой системе будут доступны такие \
файловые операции как удаление, перемещение файлов; создание \
символических и жёстких ссылок, специальных файлов; изменение прав доступа. \
Все эти изменения сохраняются при отмонтировании в тот же файл \
внешней таблицы инф.узлов и не затрагивают самого устройства.

.B anyfuse 
является FUSE реализацией 
.B anyfs
	
.SH "ПРИМЕНЕНИЕ"
.TP
.B Конвертирование файловых систем
.B anyfs-tools
позволяет конвертировать файловые системы. При этом единственным \
требованием к исходной файловой системе является наличие драйвера \
(возможно только для чтения) для ОС
.B Linux
с поддержкой системного вызова 
.BR ioctl (2) " FIBMAP" .

Конечной файловой системой на данный момент могут стать файловые системы
.BR ext2fs/ext3fs " или " xfs .
Не исключено в будущем появление поддержки построения и других \
файловых систем. В этом прежде всего заинтересованы майнтейнеры этих \
файловых систем, так как при наличии удобного инструмента для конвертирования \
других файловых систем в их, не требующего большого свободного пространства \
для сохранения данных пользователя, несомненно число пользователей этой \
файловой системы увеличится.

В общем случае порядок применения инструментов
.B anyfs-tools
для конвертирования файловой системы должен быть следующий:

1)
.B build_it
для считывания всей информации о расположении файлов и прав доступа \
и сохранения её во внешний файл таблицы инф.узлов.; 

2) может быть драйвер
.B anyfs
(или 
.BR anyfuse ")"
для освобождения места для новой файловой системы.

3) может быть
.B reblock
для изменения размера блока файловой системы в случае, если конечная файловая \
система не поддерживает тот же размер блока для данного устройства, что \
начальная;

4) наконец производится построение файловой системы с помощью утилиты
.BR build_e2fs " или " build_xfs

Весь процесс конвертирования файловой системы может быть автоматизирован \
применением скрипта
.BR anyconvertfs .

.TP
.B Восстановление битой файловой системы
Для восстановления файлов из файловой системы прежде всего предназначена утилита
.BR anysurrect .
После её использования возможно применение драйвера файловой системы
.B anyfs
(или 
.BR anyfuse ")"
для просмотра найденных файлов и может быть считывания и сохранения их \
на другую файловую систему. Драйвер также может позволить рассортировать \
файлы по директориям так как нужно пользователю, переименовать их \
нужным образом. \
Затем также возможно построение новой файловой системы при помощи утилиты
.BR build_e2fs " или " build_xfs .

При восстановлении с помощью anysurrect имена файлов не восстанавливаются, \
однако некоторые осмысленные имена файлам могут дать утилиты из пакета
.BR anyrename ,
который также может быть скачан в разделе "Download" сайта anyfs-tools.

.TP
.B Восстановление файлов с рабочей файловой системы
Для восстановления файлов порядок применения инструментов
.B anyfs-tool
тот же, что и для восстановления битой файловой системы, за тем исключением, \
что в самом начале применяется утилита
.B build_it
для считывания информации о текущем расположении файлов файловой системы.

.SH "О НУМЕРАЦИИ ВЕРСИЙ"
Было решено, что готовый пакет утилит без поддержки каких-либо \
форматов утилитой
.B anysurrect
это версия 0.8. Пакет же версии 1.0 должен будет поддерживать \
100 различных типов файлов для восстановления. \
Сейчас есть поддержка около 20-ти форматов, а версия пакета -- 0.84.

.SH "АВТОР"
Николай Кривченков aka unDEFER <undefer@gmail.com>

.SH "СООБЩЕНИЯ ОБ ОШИБКАХ"
Сообщения о любых проблемах с применением пакета
.B anyfs-tools
направляйте по адресу:
undefer@gmail.com

.SH "ЗАПРОСЫ ВОЗМОЖНОСТЕЙ"
Запросы о поддержки различных новых типов файлов также шлите на
undefer@gmail.com

Так я буду знать на какие форматы следует обратить внимание в первую очередь.

.SH "ДОСТУПНОСТЬ"
Последнюю версию пакета вы можете получить на сайте проекта: \
http://anyfs-tools.sourceforge.net

.SH "СМ. ТАКЖЕ"
.BR build_it(8),
.BR anysurrect(8),
.BR reblock(8),
.BR build_e2fs(8),
.BR build_xfs(8),
.BR anyconvertfs(8),
.BR anyfs(8),
.BR anyfuse(8),
.BR mount(8),
.BR anyfs_inode_table(5),
.BR anysurrect-plugins(3),
.BR libany(3),
.BR ioctl(2),
.BR ioctl_list(2)
