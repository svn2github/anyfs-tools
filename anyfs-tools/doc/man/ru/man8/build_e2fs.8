.TH build_e2fs 8 "05 Aug 2006" "Version 0.84.5"
.SH "НАЗВАНИЕ"
build_e2fs \- строит файловую систему e2fs исходя из информации \
считанной из файла внешней таблицы инф.узлов.
.SH "СИНТАКСИС"
.nf
.BI "build_e2fs [ \-c|\-l " filename " ] [\-b " blocksize "]"
.BI "	[\-f " fragment-size "] [\-g " blocks-per-group "]"
.BI "	[\-i " bytes-per-inode "] [\-j] [\-J " journal-options "]"
.BI "	[\-N " number-of-inodes "] [-n] [\-m " reserved-blocks-percentage "]"
.BI "	[\-o " creator-os "] [\-O " feature "[,...]] [\-q]"
.BI "	[\-r " fs-revision-level "] [\-R " raid-options "] [\-v] [\-F]"
.BI "	[\-L " volume-label "] [\-M " last-mounted-directory "] [\-S]"
.BI "	[\-T " filesystem-type "] [\-V] " "inode_table device " [ blocks-count ]
.fi

.SH "ОПИСАНИЕ"
.B build_e2fs
исходя из информации предоставляемой внешней таблицей инф.узлов \
строит на устройстве файловую систему 
.BR ext2fs .

Построение файловой системы состоит из нескольких шагов:

1) сначала в отдельной битовой карте помечаются все блоки в которых будет \
хранится системная информация файловой системы.

2) затем происходит освобождение этих блоков от информации пользователя.
.br
ВНИМАНИЕ. При большом заполнении устройства, на этом этапе возможна нехватка \
места для новой файловой системы, при этом окажется разрушенной как старая \
файловая система, так и не построена новая. Тем не менее изменённая таблица \
информационных узлов при возможности будет сохранена. Однако, лучше избегать \
данной ситуации, предварительным запуском утилиты с опцией
.B -n

3) наконец происходит собственно построение новой файловой системы, запись \
системной информации файловой системы.
.br
На этом этапе также возможны ошибки, тем не менее после второго этапа \
новая таблица инф.узлов уже сохранена и это не должно привести к \
безвозвратной потере данных.
	
.SH "ОПЦИИ"
Утилита
.B build_e2fs
основана на
.B mke2fs
из пакета
.B E2fsprogs
версии 1.35. Абсолютное большинство опций при этом сохранили своё прежнее \
значение и здесь поясняться не будет. Здесь будет дано описание лишь \
некоторых важных опций, новых опций и опций изменивших своё значение.
.TP
.BI \-b " blocksize"
Размер блока файловой системы задан в таблице инф.узлов. Попытка указать \
с помощью этой опции размера блока отличного от указанного в таблице \
инф.узлов приведёт к сообщению об ошибке и совету использовать
.BR reblock (8)
для изменения размера блока файловой системы.
.TP
.B \-c
При указании этой опции дважды
.B mke2fs
использовал деструктивный read-write тест файловой системы для выявления \
плохих блоков, что было заменено на НЕдеструктивный read-write тест.
.TP
.B \-n
при указании этой опции реально файловая система создаваться не будет \
тем не менее вы сможете узнать хватает ли места для размещения новой \
файловой системы на устройстве.
.TP
.B \-q
Не выводить никаких сообщений.
.TP
.B \-v
вы можете указать данную опцию до трёх раз, с каждым разом всё более \
увеличивая количество выводимых сообщений утилитой.
.TP
.B \-V
Вывести номер версии и выйти.
.TP
.I inode_table
внешняя таблица инф.узлов из которой будет считана информация о расположении \
пользовательских файлов текущей файловой системы их правах и структуре \
директорий.
.TP
.I device
устройство на котором будет создана новая файловая система.

.SH "ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ"
Проверка достаточности свободного места на устройстве:
.br
$ build_e2fs -n inode.table /dev/hda1

построение файловой системы ext2fs:
.br
$ build_e2fs inode.table /dev/hda1

Проверка достаточности свободного места на устройстве для ext3fs:
.br
$ build_e2fs -nj inode.table /dev/hda1

построение файловой системы ext3fs:
.br
$ build_e2fs -j inode.table /dev/hda1

.SH "АВТОР"
Николай Кривченков aka unDEFER <undefer@gmail.com>

.SH "СООБЩЕНИЯ ОБ ОШИБКАХ"
Сообщения о любых проблемах с применением пакета
.B anyfs-tools
направляйте по адресу:
undefer@gmail.com

К описанию проблемы можно приложить таблицу инф.узлов \
(сжатая gzip или bzip2 она не должна занять много места) \
и размер устройства/образа.

Размер блочного устройства в 512-байтных блоках может быть получен командой
`/sbin/blockdev --getsize <устройство>`

.SH "ДОСТУПНОСТЬ"
последнюю версию пакета вы можете получить на сайте проекта: \
http://anyfs-tools.sourceforge.net

.SH "СМ. ТАКЖЕ"
.BR anyfs-tools(8),
.BR build_xfs(8),
.BR anyfs_inode_table(5),
.BR mke2fs(8)
